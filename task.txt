Промежуточный практикум 1 месяца

Мы прошли уже половину тем модуля, настроили рабочую среду и попрактиковались с нашими первыми контрактами токенов. Пришла пора собрать все знания в кучу и выполнить достаточно сложный практикум. 

Сдавать его можно по мере выполнения, но обязательно! 

Не стоит спешить и стараться сделать его как можно скорее. Старайтесь продумать архитектуру своего протокола с самого начала, осмыслить необходимые функции, импорты и библиотеки, а также встать на сторону потенциального хакера и рассмотреть контракты на предмет уязвимостей. 

Это полноценный проект, который можно будет показать на собеседовании. Его также будет необходимо загрузить на GitHub и прислать ссылку на репо мне для проверки. С этого момента, для последующих уроков, файлы с домашним заданием приниматься не будут, только ссылки на GitHub.  


Задание

Создать один проект из нескольких контрактов, в которых будут выполнены следующие требования:

1. Пользователи смогут покупать ваш токен (токен ERC20 вашего протокола) за USDT, USDC, DAI или Эфир. При этом, ваш протокол должен будет брать комиссию в 10% от общей суммы покупки. Например, покупатель хочет купить 10 myToken за 100 USDC, ему потребуется заплатить 110 USDC для этой покупки. 

2. 10% от покупок вашего токена должны перечисляться на другой контракт для хранения. Для удобства, его можно назвать Treasury или Vault. 

3. Также пользователи могут просто делать вложения в контракт Vault тех же токенов (USDC, USDT, DAI...), за это им будет выдан 1 NFT, как чек за депозит. 

4. Позже пользователи должны иметь возможность вернуть свой NFT и получить назад депозит плюс 2% от токенов, которые были перенесены сюда после покупки myToken (тех 10% сверх). 


Требования к коду

1. Описание протокола с указанием расчетов токенов в readme файле в корневой папке проекта;

2. Комментарии к каждой функции в natspec формате;

3. Комментарии к функциям, где есть движения токенов, как было на практике в уроке - https://t.me/c/2190432570/43

4. Использование библиотеки safe для трансфера токенов;

5. В протоколе должно быть реализовано минимум два call() вызова в любой функции;

6. Проект должен быть создан при помощи программ Hardhat или Foundry, на ваш выбор, чтобы его можно было бы загрузить из GitHub позже и развернуть на другом компьютере, установив зависимости. 


Подсказки

1. Потребуется реализовать функцию whiteList для того, чтобы пользователи могли покупать myToken только за те токены, которые будут одобрены вами.

2. Для простоты приравняем 1 myToken = 1 USDT или любой другой токен. А также 1 myToken = 2 Эфирам.

3. Для создания своего токена вы можете подключать контракты OZ.

4. Старайтесь разбивать контракты по своей логике, т.е. не мешать в одном контракте и myToken, и Vault, и все остальное. 

Если возникнут вопросы, пишите в чат или мне в личные сообщения. 

Верю, что у вас все получится! 